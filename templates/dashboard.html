{% extends 'base.html' %}
{% block body %}
<div class="nav">
    <span id="mobileFriendlyHeader"
        style="display: flex; align-items: center; justify-content: space-between; margin: auto;">
        <a href="/dashboard" class="nav-brand">
            <img src="{{url_for('static', filename='img/favicon.png')}}" alt="" style="width: 30px; margin-right: 1vw;">
            Notes Wallah
        </a>
        <button id="hamburgerIcon" onclick="openMenu()"><svg xmlns="http://www.w3.org/2000/svg" height="30" width="30"
                viewBox="0 0 448 512" style="margin-right: 5vh;">
                <path fill="#000000"
                    d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z" />
            </svg></button>
    </span>
    <ul class="nav-links" id="navLinks">
        <li><a href="/dashboard">
                <svg xmlns="http://www.w3.org/2000/svg" height="13" width="13" viewBox="0 0 512 512">
                    <path fill="#000000"
                        d="M64 64c0-17.7-14.3-32-32-32S0 46.3 0 64V400c0 44.2 35.8 80 80 80H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H80c-8.8 0-16-7.2-16-16V64zm406.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L320 210.7l-57.4-57.4c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L240 221.3l57.4 57.4c12.5 12.5 32.8 12.5 45.3 0l128-128z" />
                </svg>
                Dashboard
            </a></li>
        <li><a href="/generate">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" height="13" width="13">
                    <path fill="#000000"
                        d="M308.5 135.3c7.1-6.3 9.9-16.2 6.2-25c-2.3-5.3-4.8-10.5-7.6-15.5L304 89.4c-3-5-6.3-9.9-9.8-14.6c-5.7-7.6-15.7-10.1-24.7-7.1l-28.2 9.3c-10.7-8.8-23-16-36.2-20.9L199 27.1c-1.9-9.3-9.1-16.7-18.5-17.8C173.9 8.4 167.2 8 160.4 8h-.7c-6.8 0-13.5 .4-20.1 1.2c-9.4 1.1-16.6 8.6-18.5 17.8L115 56.1c-13.3 5-25.5 12.1-36.2 20.9L50.5 67.8c-9-3-19-.5-24.7 7.1c-3.5 4.7-6.8 9.6-9.9 14.6l-3 5.3c-2.8 5-5.3 10.2-7.6 15.6c-3.7 8.7-.9 18.6 6.2 25l22.2 19.8C32.6 161.9 32 168.9 32 176s.6 14.1 1.7 20.9L11.5 216.7c-7.1 6.3-9.9 16.2-6.2 25c2.3 5.3 4.8 10.5 7.6 15.6l3 5.2c3 5.1 6.3 9.9 9.9 14.6c5.7 7.6 15.7 10.1 24.7 7.1l28.2-9.3c10.7 8.8 23 16 36.2 20.9l6.1 29.1c1.9 9.3 9.1 16.7 18.5 17.8c6.7 .8 13.5 1.2 20.4 1.2s13.7-.4 20.4-1.2c9.4-1.1 16.6-8.6 18.5-17.8l6.1-29.1c13.3-5 25.5-12.1 36.2-20.9l28.2 9.3c9 3 19 .5 24.7-7.1c3.5-4.7 6.8-9.5 9.8-14.6l3.1-5.4c2.8-5 5.3-10.2 7.6-15.5c3.7-8.7 .9-18.6-6.2-25l-22.2-19.8c1.1-6.8 1.7-13.8 1.7-20.9s-.6-14.1-1.7-20.9l22.2-19.8zM112 176a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zM504.7 500.5c6.3 7.1 16.2 9.9 25 6.2c5.3-2.3 10.5-4.8 15.5-7.6l5.4-3.1c5-3 9.9-6.3 14.6-9.8c7.6-5.7 10.1-15.7 7.1-24.7l-9.3-28.2c8.8-10.7 16-23 20.9-36.2l29.1-6.1c9.3-1.9 16.7-9.1 17.8-18.5c.8-6.7 1.2-13.5 1.2-20.4s-.4-13.7-1.2-20.4c-1.1-9.4-8.6-16.6-17.8-18.5L583.9 307c-5-13.3-12.1-25.5-20.9-36.2l9.3-28.2c3-9 .5-19-7.1-24.7c-4.7-3.5-9.6-6.8-14.6-9.9l-5.3-3c-5-2.8-10.2-5.3-15.6-7.6c-8.7-3.7-18.6-.9-25 6.2l-19.8 22.2c-6.8-1.1-13.8-1.7-20.9-1.7s-14.1 .6-20.9 1.7l-19.8-22.2c-6.3-7.1-16.2-9.9-25-6.2c-5.3 2.3-10.5 4.8-15.6 7.6l-5.2 3c-5.1 3-9.9 6.3-14.6 9.9c-7.6 5.7-10.1 15.7-7.1 24.7l9.3 28.2c-8.8 10.7-16 23-20.9 36.2L315.1 313c-9.3 1.9-16.7 9.1-17.8 18.5c-.8 6.7-1.2 13.5-1.2 20.4s.4 13.7 1.2 20.4c1.1 9.4 8.6 16.6 17.8 18.5l29.1 6.1c5 13.3 12.1 25.5 20.9 36.2l-9.3 28.2c-3 9-.5 19 7.1 24.7c4.7 3.5 9.5 6.8 14.6 9.8l5.4 3.1c5 2.8 10.2 5.3 15.5 7.6c8.7 3.7 18.6 .9 25-6.2l19.8-22.2c6.8 1.1 13.8 1.7 20.9 1.7s14.1-.6 20.9-1.7l19.8 22.2zM464 304a48 48 0 1 1 0 96 48 48 0 1 1 0-96z" />
                </svg>
                Generate Notes
            </a></li>
        <li><a href="/create_post">
                <svg xmlns="http://www.w3.org/2000/svg" height="13" width="11" viewBox="0 0 448 512">
                    <path fill="#000000"
                        d="M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z" />
                </svg>
                Share Notes
            </a></li>
        <li><a href="/study_music">
                <svg xmlns="http://www.w3.org/2000/svg" height="13" width="13" viewBox="0 0 512 512">
                    <path fill="#000000"
                        d="M256 80C149.9 80 62.4 159.4 49.6 262c9.4-3.8 19.6-6 30.4-6c26.5 0 48 21.5 48 48V432c0 26.5-21.5 48-48 48c-44.2 0-80-35.8-80-80V384 336 288C0 146.6 114.6 32 256 32s256 114.6 256 256v48 48 16c0 44.2-35.8 80-80 80c-26.5 0-48-21.5-48-48V304c0-26.5 21.5-48 48-48c10.8 0 21 2.1 30.4 6C449.6 159.4 362.1 80 256 80z" />
                </svg>
                Share Music
            </a></li>
        <li><a href="/profile">
                <svg xmlns="http://www.w3.org/2000/svg" height="13" width="11" viewBox="0 0 448 512">
                    <path fill="#000000"
                        d="M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z" />
                </svg>
                Profile
            </a></li>
        <li><a href="/logout">
                <svg xmlns="http://www.w3.org/2000/svg" height="13" width="13" viewBox="0 0 512 512">
                    <path fill="#000000"
                        d="M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z" />
                </svg>
                Logout
            </a></li>
    </ul>
</div>
<br><br><br><br><br>
<div class="header"
    style="top: 0; width: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; position: absolute; margin: 15vh; z-index: 999; background-color: white; padding: 20px 0; margin-bottom: 5vh;">
    <h2>Dashboard</h2>
    <div class="tabButtons" style="width: 80%; display: flex; border-bottom: 1px solid #dddddd; margin-top: 2vh;">
        <button class="tabLinks1" onclick="openNote()">Notes</button>
        <button class="tabLinks2" onclick="openMusic()">Music</button>
    </div>
</div>
{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
<ul>
    {% for category, message in messages %}
    <li class="{{ category }}">{{ message }}</li>
    {% endfor %}
</ul>
{% endif %}
{% endwith %}
{% if post_details %}
<div class="tab-container" style="position: relative;">
    <div class="tabContent" id="notes">
        <!-- <table>
            <th>
                <tr>
                    <td>Author</td>
                    <td>Filename</td>
                    <td>View File</t>
                    <td>Date Uploaded</td>
                </tr>
            </th>
            {% for post_detail in post_details %}
            <!-- <a href="{{ url_for('view_post', post_id=post_detail.post.id) }}"
            style="color: black;text-decoration: none;margin-top: 5vh;display: flex;flex-direction: column;align-items: center;justify-content: center; width: 70%;">
            <div class="post-container"
                style="display: flex; flex-direction: column; align-items: center; justify-content: center; width: 70%; border: 1px solid black; padding: 20px; margin-top: 5vh;">
                <h3>{{ post_detail.post.file_name }}</h3>

                <span style="display: flex; align-items: center; justify-content: center; margin: 2vh 0 0 0;">
                    <img src="{{ post_detail.author_profile_picture }}" alt="Author's Profile Picture" width="50px"
                        style="border-radius: 50%; aspect-ratio: 1/1; size: cover;">
                    <p><a href="{{ url_for('author_profile', user_id=post_detail.post.author.id) }}">{{
                            post_detail.post.author.username }}</a></p>
                </span>
                <p>{{ post_detail.post.posted_at.strftime('%Y-%m-%d %H:%M:%S') }}</p>

            </div>
        </a>
            <tr>
                <td><a style="display: flex; align-items: center; justify-content: center; gap: 2px;"
                        href="{{ url_for('author_profile', user_id=post_detail.post.author.id) }}">
                        <img src="{{post_detail.author_profile_picture}}" alt="Author" width="30" height="30"
                            style="border-radius: 50%; background-size: cover; aspect-ratio: 1/1;">{{post_detail.post.author.username}}</a>
                </td>
                <td>{{post_detail.post.file_name}}</td>
                <td><a href="{{ url_for('view_post', post_id=post_detail.post.id) }}">Click Here To view</a>
                </td>
                <td>{{post_detail.post.posted_at}}</td>
            </tr>
            {% endfor %}
        </table> -->
        {% for post_detail in post_details %}
        <!-- <div class="dashboard-card">
            <div class="dashboard-image">
                <iframe src="{{post_detail.post.file_path}}" frameborder="0" oncontextmenu="return false;"></iframe>
            </div>
            <div class="dashboard-content">
                <a href="{{ url_for('view_post', post_id=post_detail.post.id) }}">
                    <span class="title">
                        {{post_detail.post.file_name}}
                    </span> <br>
                    <span style="display: flex; align-items: center; margin: 10px 0;">
                        <img src="{{post_detail.author_profile_picture}}" alt="author profile picture" style="width:25px; height: 25px; aspect-ratio: 1/1; size: cover; border-radius: 50%; margin-right: 10px;"> <p style="font-size: 1rem;">{{post_detail.post.author.username}}</p>
                    </span>
                </a>

                <p class="desc">
                    {{post_detail.post.file_description}}
                </p>

                <a class="action" href="{{ url_for('view_post', post_id=post_detail.post.id) }}">
                    View File
                    <span aria-hidden="true">
                        →
                    </span>
                </a>
            </div>
        </div> -->
        <div class="card-dashboard">
            <h3 class="card__title"><a
                    href="{{ url_for('view_post', post_id=post_detail.post.id) }}">{{post_detail.post.file_name}}</a>
            </h3>
            <p class="card__content">{{post_detail.post.file_description}}</p>
            <div class="card__date">
                <span style="display: flex; align-items: center; margin: 10px 0;">
                    <img src="{{post_detail.author_profile_picture}}" alt="author profile picture"
                        style="width:25px; height: 25px; aspect-ratio: 1/1; size: cover; border-radius: 50%; margin-right: 10px;">
                    <p style="font-size: 1rem;">{{post_detail.post.author.username}}</p>
                </span>
            </div>
            <a href="{{ url_for('view_post', post_id=post_detail.post.id) }}">
                <div class="card__arrow">

                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" height="15" width="15">
                        <path fill="#fff"
                            d="M13.4697 17.9697C13.1768 18.2626 13.1768 18.7374 13.4697 19.0303C13.7626 19.3232 14.2374 19.3232 14.5303 19.0303L20.3232 13.2374C21.0066 12.554 21.0066 11.446 20.3232 10.7626L14.5303 4.96967C14.2374 4.67678 13.7626 4.67678 13.4697 4.96967C13.1768 5.26256 13.1768 5.73744 13.4697 6.03033L18.6893 11.25H4C3.58579 11.25 3.25 11.5858 3.25 12C3.25 12.4142 3.58579 12.75 4 12.75H18.6893L13.4697 17.9697Z">
                        </path>
                    </svg>
                </div>
            </a>
        </div>
        {% endfor %}
    </div>
    <div id="music" class="tabContent">
        {% for music in musiclist %}
        <div class="music-card" style="flex-basis: 50%;">
            <span style="display: flex; align-items: center; justify-content: center; margin: 2vh 0;"><img
                    src="{{music.author_profile_picture}}" alt="Profile Picture of Author" width="50px"
                    style="border-radius: 50%; aspect-ratio: 1/1; size: cover;">
                <p style="margin: 2vh 1vw;"><b><a
                            href="{{ url_for('author_profile', user_id=music.music.author.id) }}">{{music.music.author.username}}</a></b>
                    {{music.music.posted_at.strftime("%Y %H:%M:%S")}}
                </p>
            </span>
            <iframe id="musicFrame" src="https://www.youtube.com/embed/{{music.music.music_link}}"
                title="{{music.music.music_name}}" frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                allowfullscreen style="border: 1px solid black;"></iframe>
        </div>
        {% endfor %}
    </div>
</div>
{% else %}
<center>
    <h1 style="color: grey; font-size: 30px; margin: 5vh auto;">No Posts Available</h1>
</center>
{% endif %}
{% endblock %}